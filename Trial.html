<!DOCTYPE html> 
<html lang="en">
<head>
    <title>Dopaminergic Pathway Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.0.0/d3.min.js"></script>
    <style>
        .link { stroke: #555; stroke-width: 1.5; }
        .node text { pointer-events: none; font: 10px sans-serif; }
    </style>
</head>

<body style="background-color: #f0f8ff;">
    <h1>Visualization of Dopaminergic Pathway Affected by Cannabis Use</h1>
    <p>The dopaminergic pathway, especially the mesolimbic and mesocortical pathways, are known to be influenced by cannabis. This visualization shows the main brain regions and neurotransmitters involved in dopaminergic signaling that cannabis affects.</p>
    <p>Key brain regions include the <a href="https://en.wikipedia.org/wiki/Ventral_tegmental_area" target="_blank">ventral tegmental area (VTA)</a>, the <a href="https://en.wikipedia.org/wiki/Nucleus_accumbens" target="_blank">nucleus accumbens (NAc)</a>, and the <a href="https://en.wikipedia.org/wiki/Prefrontal_cortex" target="_blank">prefrontal cortex (PFC)</a>. The VTA releases dopamine, which cannabis can amplify, leading to increased dopamine levels in the NAc and PFC, which is associated with the euphoric effects of cannabis.</p>

    <svg id="chart" width="1000" height="800"></svg>

    <script>
        const nodes = [
            { id: "Ventral Tegmental Area (VTA)", link: "https://en.wikipedia.org/wiki/Ventral_tegmental_area", group: 1 },
            { id: "Nucleus Accumbens (NAc)", link: "https://en.wikipedia.org/wiki/Nucleus_accumbens", group: 1 },
            { id: "Prefrontal Cortex (PFC)", link: "https://en.wikipedia.org/wiki/Prefrontal_cortex", group: 1 },
            { id: "Dopamine", link: "https://en.wikipedia.org/wiki/Dopamine", group: 2 },
            { id: "Cannabinoid Receptor (CB1)", link: "https://en.wikipedia.org/wiki/Cannabinoid_receptor_type_1", group: 3 }
        ];

        const links = [
            { source: "Ventral Tegmental Area (VTA)", target: "Dopamine", type: "produces" },
            { source: "Dopamine", target: "Nucleus Accumbens (NAc)", type: "stimulates" },
            { source: "Dopamine", target: "Prefrontal Cortex (PFC)", type: "stimulates" },
            { source: "Cannabinoid Receptor (CB1)", target: "Ventral Tegmental Area (VTA)", type: "modulates" }
        ];

        const width = 1000;
        const height = 800;

        const svg = d3.select("#chart")
            .attr("width", width)
            .attr("height", height);

        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(150))
            .force("charge", d3.forceManyBody().strength(-300))
            .force("center", d3.forceCenter(width / 2, height / 2));

        const link = svg.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", "link")
            .attr("stroke", "#999")
            .attr("stroke-width", 2);

        const node = svg.append("g")
            .selectAll("g")
            .data(nodes)
            .enter().append("g")
            .on("click", (event, d) => window.open(d.link, "_blank"));

        node.append("circle")
            .attr("r", 10)
            .attr("fill", d => d.group === 1 ? "#1f77b4" : d.group === 2 ? "#ff7f0e" : "#2ca02c")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        node.append("text")
            .attr("x", 12)
            .attr("y", 3)
            .text(d => d.id);

        node.append("title")
            .text(d => d.id);

        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }
    </script>
</body>
</html>